<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Authentication</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  </head>
  <body>
    <div class="container mt-4">
        <h4 class="text-primary">Authentication with sessionStorage</h4>
        <h4 class="text-danger">Login</h4>
      <form>
        <div class="form-group mt-4">
          <label for="userName">User Name:</label>
          <input
            type="text"
            class="form-control"
            id="userName"
            placeholder="Enter Username"
            name="username"
          /> 
        
        <div class="form-group mt-4">
          <label for="exampleInputPassword1">Password</label>
          <input
            type="password"
            name="password"
            class="form-control"
            id="exampleInputPassword1"
            placeholder="Password"
          />
        </div>
        
        <button onclick="auth(event)" type="submit" class="btn btn-success">Login</button>
        <a class="btn btn-primary" href="./register.html">Register</a>
      </form>
      <script>
          function auth(e)
          {              
              e.preventDefault();
              let uname = document.getElementById('userName').value;
              let pwd = document.getElementById('exampleInputPassword1').value;
              if(uname === "" && pwd =="")
              {
                alert("Enter Credentials")
                return
              }

              let data  = JSON.parse( window.sessionStorage.getItem('userinfo'));
              if(data==null)
              {
                alert("Register yourself First")

              }
              else{
                if(uname === data.uname  && pwd === data.pwd)
              {
              window.location.href = "./profile.html"

              }
              else
              {
                alert("Invalid username or Password")

                return

              }
              }
              
              

          }
      </script>
    </div>
  </body>
</html>
